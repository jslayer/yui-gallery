<!doctype html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <title></title>
  <script src="http://yui.yahooapis.com/3.9.1/build/yui/yui-min.js"></script>
  <script src="../../gallery-adjet-min.js"></script>

  <script>
    YUI().use('gallery-adjet', function(Y){
      var AdjetComplex,
          acInstance;

      AdjetComplex = Y.Base.create('first', Y.Adget, [ ], {}, {
        ATTRS : {
          timeValue : {
            value : null
          },
          htmlAttr : {
            value : null
          },
          imagePathAttr : {
            value : null
          },
          sections : {
            value : ['headerSection', 'body']
          }
        },
        SECTIONS : {
          body : {
            cssName  : 'content',
            elements : {
              htmlAttrPlain : {
                attribute : 'htmlAttr'
              },
              htmlAttrHtml : {
                attribute : 'htmlAttr',
                allowHTML : true
              },
              imagePlain : {
                attribute  : 'imagePathAttr',
                template   : '<img>',
                targetAttr : 'src'
              },
              imageFormatted : {
                attribute  : 'imagePathAttr',
                template   : '<img>',
                targetAttr : 'src',
                formatter  : function(value, element){
                  element._node.setAttrs({
                    alt : 'Text alt attribute value'
                  });
                }
              }
            }
          },
          headerSection : {
            elements : {
              text : {
                value : 'Just a text'
              },
              valuePlainCustom : {
                cssName   : 'customTimeValue',
                attribute : 'timeValue'
              },
              valuePlain : {
                attribute : 'timeValue'
              },
              valueFormatted : {
                attribute : 'timeValue',
                formatter : function(value) {
                  return ['[', value, ']'].join('');
                }
              },
              valueNested : {
                attribute : 'timeValue',
                template  : '<h3>Date.now(): <span></span></h3>',
                selector  : '>span'
              }
            }
          }
        }
      });

      acInstance = new AdjetComplex({
        timeValue     : Date.now(),
        htmlAttr      : '<b>Lorem</b>',
        imagePathAttr : 'http://yuilibrary.com/img/community/preview-gallery.jpg'
      });

      acInstance.render(Y.one('body'));

      /**
       * Simple buttons to change 2 values;
       */

      Y.one('#btn-htmlAttr').on('click', function() {
        var values = [
              '<b>Lorem</b>',
              '<i>Ipsum</i>',
              '<a href="#">Dolor</a>'
            ],
            current = acInstance.get('htmlAttr'),
            index = values.indexOf(current);

        acInstance.set('htmlAttr', values[index >= values.length - 1 ? 0 : index + 1]);
      });
      Y.one('#btn-imagePathAttr').on('click', function() {
        var values = [
              'http://yuilibrary.com/img/community/preview-gallery.jpg',
              'http://yuilibrary.com/img/community/preview-theater.jpg'
            ],
            current = acInstance.get('imagePathAttr'),
            index = values.indexOf(current);

        acInstance.set('imagePathAttr', values[index >= values.length - 1 ? 0 : index + 1]);
      });

      /**
       * Update timeValue with 1000ms interval
       */
      Y.later(1000, acInstance, function() {
        this.set('timeValue', Date.now());
      }, null, true);

    });
  </script>
</head>
<body>
<fieldset>
  <div>
    <button id="btn-htmlAttr">Change `htmlAttr`</button>
  </div>
  <div>
    <button id="btn-imagePathAttr">Change `imagePathAttr`</button>
  </div>
</fieldset>
</body>
</html>
